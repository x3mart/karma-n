{"version":3,"sources":["components/reviews/ReviewAttribute.js","components/reviews/Review.js","components/reviews/PhoneInput.js","components/ReviewContent.js","pages/other/AddReview.js"],"names":["ReviewAttribute","data","action","useState","title","setTitle","titleName","setTitleName","value","setValue","useEffect","id","style","fontSize","height","verticalAlign","paddingRight","defaultValue","onChange","val","character","className","appElement","document","getElementById","Modal","setAppElement","Review","template","proper_phone","text_action","attributes_action","review_action","success","error","template_reset","active","setActive","attributes","setAttributes","attributesList","setAttributesList","modalIsOpen","setIsOpen","background","setBackground","reviewText","setReviewText","rating","body","map","item","closeModal","handleAttributeUpdate","obj","length","arr","filter","push","isOpen","contentLabel","onRequestClose","overlayClassName","minHeight","onClick","placeholder","rows","e","target","key","backgroundColor","PhoneInput","review_clicked","phoneAction","phone_number","regex","phone","setPhone","properPhone","setProperPhone","inputClass","setInputClass","control","useForm","test","name","render","field","type","mask","n","propTypes","location","PropTypes","object","connect","state","isAuthenticated","auth","user","review_templates","review","reviews_about_me","my_reviews","set_review_success","getReviewTemplates","setReview","getReviewsAboutMe","getMyReviews","setComment","resetStatus","resetReviewError","search","match","templates","setTemplates","reviewFull","setReviewFull","reviewClicked","setReviewClicked","templatesRequestSent","setTemplatesRequestSent","num","split","to","handleTEmplateRequest","handleTEmplateReset","handleReviewText","text","handleAttributes","handleReview","handleReviewClick","bool","borderLeft","AddReview","pathname","meta_tags","content","process","MainLayout","headerTop","Breadcrumb","SideBar","cat"],"mappings":"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","file":"static/js/18.ca805078.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Rate from 'rc-rate'\nimport 'rc-rate/assets/index.css'\n\nconst ReviewAttribute = ({ data, action }) => {\n\n\n  const [title, setTitle] = useState('')\n  const [titleName, setTitleName] = useState('')\n  \n  const [value, setValue] = useState('')\n\n  useEffect(() => {\n    if (data) {\n      setTitle(data.title.id)\n      setTitleName(data.title.title)\n      \n      setValue(data.value)\n    }\n  }, [data])\n\n  const handleAttributeChange = val => {\n      setValue(val)\n      const obj = {\n        \n        title: title,\n        value: val,\n      }\n    action(obj)\n  }\n\n  \n  return (\n    <tr>\n      <td\n        style={{\n          fontSize: 22,\n          height: '60px',\n          verticalAlign: 'middle',\n          paddingRight: '40px',\n        }}\n      >\n        {titleName}\n      </td>\n      <td style={{ verticalAlign: 'middle', paddingRight: '40px' }}>\n        <Rate\n          defaultValue={0}\n          value={value}\n          onChange={handleAttributeChange}\n          style={{ fontSize: 30 }}\n          //   allowHalf\n          character={<i className='fa fa-star'></i>}\n        />\n      </td>\n    </tr>\n  )\n}\n\nexport default ReviewAttribute\n","import React, { useState, useEffect } from 'react'\nimport Modal from 'react-modal'\nimport Rate from 'rc-rate'\nimport 'rc-rate/assets/index.css'\n\nimport ReviewAttribute from './ReviewAttribute'\n\nlet appElement = document.getElementById('root')\n\nModal.setAppElement(appElement)\n\nconst Review = ({\n  template,\n  data,\n  action,\n  proper_phone,\n  text_action,\n  attributes_action,\n  review_action,\n  success,\n  error,\n  template_reset,\n}) => {\n  const [active, setActive] = useState(false)\n  const [attributes, setAttributes] = useState([])\n  const [attributesList, setAttributesList] = useState([])\n  const [modalIsOpen, setIsOpen] = useState(false)\n  const [background, setBackground] = useState('rgba(0, 0, 0, 0.05)')\n  const [title, setTitle] = useState('')\n\n  const [reviewText, setReviewText] = useState('')\n\n  useEffect(() => {\n    if (template) {\n      if (data && data.rating) {\n        if (data && data.rating <= 2) {\n          setBackground('#f8d7da')\n        } else if (data && data.rating > 2 && data.rating < 4) {\n          setBackground('#fff3cd')\n        } else if (data && data.rating >= 4) {\n          setBackground('#d1e7dd')\n        }\n      } else {\n        setBackground('#cfe2ff')\n      }\n      if (data && data.body) {\n        setTitle(data.body)\n        setReviewText(data.body)\n      }\n      if (data && data.attributes) {\n        setAttributes(data.attributes)\n        active &&\n          setAttributesList(\n            data.attributes.map(item => ({\n              title: item.title.id,\n              value: item.value,\n            }))\n          )\n      }\n    } else {\n      setTitle('Оставьте свой комментарий')\n      if (data && data.attributes) {\n        setAttributes(\n          data.attributes.map(item => ({\n            title: { id: item.title.id, title: item.title.title },\n            value: 0,\n          }))\n        )\n        active &&\n          setAttributesList(\n            data.attributes.map(item => ({\n              title: item.title.id,\n              value: 0,\n            }))\n          )\n      }\n    }\n  }, [data, active])\n\n  const openModal = () => {\n    text_action(reviewText)\n    setActive(true)\n    setIsOpen(true)\n  }\n\n  const closeModal = () => {\n    setActive(false)\n    setIsOpen(false)\n  }\n\n  const handleReviewText = e => {\n    setReviewText(e.target.value)\n    text_action(e.target.value)\n  }\n\n  const handleSuccessClose = () => {\n    closeModal()\n    template_reset()\n  }\n\n  const handleModalOpenButton = () => {\n    action(true)\n    proper_phone && openModal()\n  }\n\n  const handleAttributeUpdate = obj => {\n    if (attributesList.length > 0) {\n      let arr = attributesList.filter(item => item.title !== obj.title)\n      arr.push(obj)\n      setAttributesList(arr)\n    } else {\n      setAttributesList([obj])\n    }\n  }\n\n  useEffect(() => {\n    if (attributesList.length > 0) {\n      attributes_action(attributesList)\n    }\n  }, [attributesList])\n\n  return (\n    <>\n      <Modal\n        isOpen={modalIsOpen}\n        contentLabel='onRequestClose Example'\n        onRequestClose={closeModal}\n        className='Modal'\n        overlayClassName='Overlay'\n      >\n        {success === 201 ? (\n          <div\n            className='w-100 d-flex align-items-center justify-content-center text-success flex-column'\n            style={{ minHeight: 200 }}\n          >\n            <h2 className='mb-5'>Ваш отзыв успешно добавлен!</h2>\n            <button\n              className='btn btn-review mt-5'\n              onClick={handleSuccessClose}\n            >\n              Закрыть\n            </button>\n          </div>\n        ) : error ? (\n          <div\n            className='w-100 d-flex align-items-center justify-content-center text-success flex-column'\n            style={{ minHeight: 200 }}\n          >\n            <h2 className='mb-5'>{error}</h2>\n            <button className='btn btn-review mt-5' onClick={closeModal}>\n              Закрыть\n            </button>\n          </div>\n        ) : (\n          <>\n            <form>\n              <input\n                placeholder='Напишите свой комментарий'\n                rows='2'\n                className='form-control phone-input phone-input-small'\n                // onFocus={() => setActiveReview(null)}\n                onChange={handleReviewText}\n                value={reviewText}\n              />\n            </form>\n            <table>\n              <tbody>\n                {attributes.map(item => (\n                  <ReviewAttribute\n                    key={item.title.id}\n                    data={item}\n                    action={handleAttributeUpdate}\n                  />\n                ))}\n              </tbody>\n            </table>\n\n            <div className='d-flex justify-content-between mt-30'>\n              <div>\n                <button\n                  className='btn btn-review pull-right'\n                  onClick={review_action}\n                >\n                  Отправить\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n      </Modal>\n\n      <div\n        className={`quick-review-wrap ${\n          active ? 'quick-review-border-active' : 'quick-review-border'\n        }`}\n        style={{ backgroundColor: background }}\n        onClick={handleModalOpenButton}\n      >\n        <div className='quick-review'>{title}</div>\n      </div>\n    </>\n  )\n}\n\nexport default Review\n","import React, { Fragment, useEffect, useState } from 'react'\n\nimport InputMask from 'react-input-mask'\nimport { useForm, Controller } from 'react-hook-form'\n\nconst PhoneInput = ({\n  review_clicked,\n  proper_phone,\n  phoneAction,\n  phone_number,\n}) => {\n  const regex =\n    /^(\\+7)?[\\s]?\\(?[0-9]{3}\\)?[\\s]?[0-9]{3}[\\-]?[0-9]{2}[\\-]?[0-9]{2}$/\n\n  const [phone, setPhone] = useState('')\n  const [properPhone, setProperPhone] = useState(false)\n\n  const [inputClass, setInputClass] = useState('')\n\n  const { control } = useForm()\n\n  const handlePhone = n => {\n    setPhone(n)\n  }\n\n  useEffect(() => {\n    if(phone_number) {\n      setPhone(phone_number)\n    }\n  }, [phone_number])\n\n  useEffect(() => {\n    setProperPhone(regex.test(phone))\n    proper_phone(regex.test(phone))\n  }, [phone])\n\n  useEffect(() => {\n    if (properPhone) {\n      phoneAction(phone)\n      setInputClass('input-success')\n    } else {\n      review_clicked && setInputClass('input-danger')\n    }\n  }, [properPhone, review_clicked])\n\n  return (\n    <Fragment>\n      <Controller\n        control={control}\n        name='phone'\n        defaultValue={phone}\n        render={({ field }) => (\n          <InputMask\n            type='tel'\n            className={`phone-input phone-input-small ${inputClass}`}\n            mask='+7 (999) 999-99-99'\n            placeholder='Введите номер телефона: +7 (901) 234-56-78'\n            value={phone}\n            onChange={e => field.onChange(handlePhone(e.target.value))}\n          />\n        )}\n      />\n    </Fragment>\n  )\n}\n\nexport default PhoneInput\n","import PropTypes from 'prop-types'\nimport React, { Fragment, useEffect, useState } from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport InputMask from 'react-input-mask'\nimport { useForm, Controller } from 'react-hook-form'\nimport {\n  getReviewTemplates,\n  setReview,\n  getReviewsAboutMe,\n  getMyReviews,\n  setComment,\n  resetStatus,\n  resetReviewError,\n} from '../redux/actions/reviewActions'\nimport { isNotEmptyObject } from '../functions'\nimport Review from './reviews/Review'\nimport PhoneInput from './reviews/PhoneInput'\n\nconst ReviewContent = ({\n  search,\n  match,\n  isAuthenticated,\n  user,\n  review_templates,\n  getReviewTemplates,\n  setReview,\n  set_review_success,\n  resetStatus,\n  resetReviewError,\n  error,\n}) => {\n  const [templates, setTemplates] = useState([])\n  const [active, setActive] = useState('')\n  const [activeReview, setActiveReview] = useState(null)\n  const [rating, setRating] = useState(null)\n  const [reviewText, setReviewText] = useState('')\n  const [reviewCommentText, setReviewCommentText] = useState('')\n  const [reviewFull, setReviewFull] = useState({\n    phone_number: '',\n    attributes: [],\n    body: '',\n  })\n\n  const [reviewClicked, setReviewClicked] = useState(false)\n  const [properPhone, setProperPhone] = useState(false)\n  const [phone, setPhone] = useState('')\n\n  const [templatesRequestSent, setTemplatesRequestSent] = useState(false)\n\n  useEffect(() => {\n    if (search) {\n      let num = search.split('=')[1]\n      setPhone(num)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (review_templates) {\n      setTemplates(review_templates)\n    }\n  }, [review_templates])\n\n  if (!isAuthenticated) {\n    return <Redirect to='/login' />\n  }\n\n  // const handleQuickReview = (id, text) => {\n  //   setActiveReview(id === activeReview ? null : id)\n  //   setReviewText(text)\n  //   setReviewFull({\n  //     ...reviewFull,\n  //     body: text,\n  //   })\n  // }\n\n\n  const handleTEmplateRequest = n => {\n    getReviewTemplates(n)\n    setTemplatesRequestSent(true)\n  }\n\n  const handleTEmplateReset = () => {\n    setTemplatesRequestSent(false)\n  }\n\n  const handlePhone = phone => {\n    setReviewFull({\n      ...reviewFull,\n      phone_number: phone,\n    })\n  }\n\n  const handleReviewText = text => {\n    setReviewFull({\n      ...reviewFull,\n      body: text,\n    })\n  }\n\n  const handleAttributes = arr => {\n    setReviewFull({\n      ...reviewFull,\n      attributes: arr,\n    })\n  }\n\n  const handleReview = () => {\n    setReview(reviewFull)\n  }\n\n  const handleReviewClick = bool => {\n    resetStatus()\n    resetReviewError()\n    setReviewClicked(bool)\n  }\n\n  return (\n    <Fragment>\n      <div className='panel'>\n        <div className='bio-graph-heading'>Написать отзыв</div>\n        <div className='panel-body bio-graph-info mb-4'>\n          {!templatesRequestSent && (\n            <div\n              className='w-100 d-flex flex-column justify-content-center align-items-center'\n              style={{ minHeight: 300 }}\n            >\n              <div className='mb-4' style={{ fontSize: 24 }}>\n                {' '}\n                Кому Вы хотите оставить отзыв?\n              </div>\n              <div className='d-flex justify-items-around mt-5'>\n                <button\n                  className='btn btn-outline-secondary mr-5'\n                  onClick={() => handleTEmplateRequest(0)}\n                >\n                  ИСПОЛНИТЕЛЮ\n                </button>\n                <button\n                  className='btn btn-outline-secondary ml-5'\n                  onClick={() => handleTEmplateRequest(1)}\n                >\n                  ЗАКАЗЧИКУ\n                </button>\n              </div>\n            </div>\n          )}\n          {templatesRequestSent && (\n            <>\n              <PhoneInput\n                phone_number={phone}\n                review_clicked={reviewClicked}\n                proper_phone={setProperPhone}\n                phoneAction={handlePhone}\n              />\n\n              <div className='mb-4'>\n                Выберите наиболее подходящий коментарий, либо оставьте свой.\n                Стандартные коментарии можно редактировать перед сохранением.\n              </div>\n              <div className='row'>\n                <div className='col-md-8'>\n                  {templates &&\n                    templates.map(item => (\n                      <Review\n                        template={true}\n                        data={item}\n                        key={item.id}\n                        action={handleReviewClick}\n                        text_action={handleReviewText}\n                        attributes_action={handleAttributes}\n                        review_action={handleReview}\n                        proper_phone={properPhone}\n                        success={set_review_success}\n                        error={error}\n                        template_reset={handleTEmplateReset}\n                        />\n                        ))}\n                </div>\n                <div\n                  className='col-md-4 d-flex align-items-center justify-content-center'\n                  style={{ borderLeft: '1px solid rgba(0, 0, 0, 0.08)' }}\n                  >\n                  <Review\n                    template={false}\n                    data={templates[0]}\n                    action={handleReviewClick}\n                    text_action={handleReviewText}\n                    attributes_action={handleAttributes}\n                    review_action={handleReview}\n                    proper_phone={properPhone}\n                    success={set_review_success}\n                    error={error}\n                    template_reset={handleTEmplateReset}\n                  />\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  )\n}\n\nReview.propTypes = {\n  location: PropTypes.object,\n}\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user,\n  review_templates: state.review.review_templates,\n  reviews_about_me: state.review.reviews_about_me,\n  my_reviews: state.review.my_reviews,\n  set_review_success: state.review.set_review_success,\n  error: state.review.error,\n})\n\nexport default connect(mapStateToProps, {\n  getReviewTemplates,\n  setReview,\n  getReviewsAboutMe,\n  getMyReviews,\n  setComment,\n  resetStatus,\n  resetReviewError,\n})(ReviewContent)\n","import React, {Fragment} from \"react\";\nimport MetaTags from \"react-meta-tags\";\nimport {BreadcrumbsItem} from \"react-breadcrumbs-dynamic\";\nimport MainLayout from \"../../layouts/MainLayout\";\nimport Breadcrumb from '../../components/breadcrumbs/Breadcrumb'\nimport SideBar from \"../../components/my-account/SideBar\";\nimport ReviewContent from \"../../components/ReviewContent\";\n\nconst AddReview = ({ location }) => {\n\n  const {pathname, search} = location;\n\n  const meta_tags = (\n    <Fragment>\n      <meta\n          name=\"description\"\n          content=\"Добавить отзыв\"\n        />\n    </Fragment>\n  )\n\n  return (\n    <Fragment>\n      <MetaTags>{meta_tags}</MetaTags>\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + '/'}>\n        Главная\n      </BreadcrumbsItem>\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + pathname}>\n        Добавить отзыв\n      </BreadcrumbsItem>\n      <MainLayout headerTop='visible'>\n        <Breadcrumb />\n\n        <div className='container bootstrap snippets bootdey'>\n          <div className='row'>\n            <div className='profile-nav col-md-6 col-xl-3'>\n              <SideBar cat='review' />\n            </div>\n            <div className='profile-info col-md-6 col-xl-9'>\n              <ReviewContent search={search} />\n            </div>\n          </div>\n        </div>\n      </MainLayout>\n    </Fragment>\n  )\n\n}\n\nexport default AddReview\n"],"sourceRoot":""}